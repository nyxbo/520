
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>你的爸爸是个什么样的人</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="你的爸爸是个什么样的人" />
    <meta name="description" content="你的爸爸是个什么样的人" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <link rel="stylesheet" href="http://p2.ifengimg.com/ifengimcp/sta/20170615/animate.css_194259.css"/>
    <meta name="sharecontent" data-msg-img="http://p2.ifengimg.com/a/2017/0615/weixinImg.jpg" data-msg-title="天呢，我爸竟然是这样的男人" data-msg-content="天呢，我爸竟然是这样的男人" data-msg-callBack="" data-line-img="http://p2.ifengimg.com/a/2017/0615/weixinImg.jpg" data-line-title="天呢，我爸竟然是这样的男人" data-line-callBack=""/>
</head>
<style>
    body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,button,input,textarea,th,td{margin:0;padding:0}body{font-size:12px;font-style:normal;font-family:"\5FAE\8F6F\96C5\9ED1",Helvetica,sans-serif}small{font-size:12px}h1{font-size:18px}h2{font-size:16px}h3{font-size:14px}h4,h5,h6{font-size:100%}ul,ol{list-style:none}a{text-decoration:none;background-color:transparent}a:hover,a:active{outline-width:0;text-decoration:none}table{border-collapse:collapse;border-spacing:0}hr{border:0;height:1px}img{border-style:none}img:not([src]){display:none}svg:not(:root){overflow:hidden}html{-webkit-touch-callout:none;-webkit-text-size-adjust:100%}input,textarea,button,a{-webkit-tap-highlight-color:rgba(0,0,0,0)}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]),video:not([controls]){display:none;height:0}progress{vertical-align:baseline}mark{background-color:#ff0;color:#000}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}button,input,select,textarea{font-size:100%;outline:0}button,input{overflow:visible}button,select{text-transform:none}textarea{overflow:auto}button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.clear:after{display:block;height:0;content:"";clear:both}
    body,div,ol,ul,h1,h2,h3,h4,h5,h6,p,th,td,dl,dd,form,iframe,input,textarea,select,label,article,aside,footer,header,menu,nav,section,time,audio,video{margin:0;padding:0; box-sizing: border-box;}
    article,aside,footer,header,hgroup,nav,section,audio,canvas,video,img{display:block; box-sizing: border-box;}
    body{font-size:100%;font-family:Helvetica,STHeiti,Droid Sans Fallback;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}
    textarea{resize:none}iframe,img{border:0}ul,ol{list-style:none}input,select,textarea{outline:0;-webkit-user-modify:read-write-plaintext-only}input{-webkit-appearance:none}
    a{text-decoration:none}h1,h2,h3,h4{font-weight:100}
    [v-cloak] {display:none}
    html,body{width: 100%;height: 100%;overflow: hidden;}
    #app {width: 100%;height:100%;position: relative; max-width: 500px; margin: 0 auto;}
    #app img {width:100%;}
    .loading {width: 100%;height:100%;position: absolute;top:0; left:0; background:#ffef35;}
    .loading .img-container {position: absolute; width: 1.32rem; height: 1.30rem; top: 30%; left: 50%; margin-left: -.66rem; animation:rotate 2s linear infinite; -webkit-animation:rotate 2s linear infinite;}
    .loading p {position: absolute; top:30%; margin-top: 1.70rem; font-size: .35rem; width: 100%; font-weight: bold; text-align: center;color:#fff;}
    #page1 {width:100%; height:100%; position:absolute; top: 0; left:0; background:url(http://p2.ifengimg.com/a/2017/0615/background.png) no-repeat; background-size:100% 100%; }
    #page1 .title_container {opacity: 0; position:absolute; width:6.58rem; height:6.98rem; top:.2rem; left:50%; margin-left:-3.29rem;}
    #page1 .title {opacity: 0;position:absolute; width:6.21rem; height:5.87rem; top:.6rem; left:50%; margin-left:-3.105rem;}
    #page1 .father1 {opacity: 0;position:absolute; width:3.76rem; height:4.98rem; bottom:1rem; left:0;}
    #page1 .father2 {opacity: 0;position:absolute; width:3.85rem; height:4.22rem; bottom:1.2rem; right:0;}
    #page1 .logo {position: absolute;width:3.56rem; height:.48rem; bottom:.3rem;left:50%; margin-left:-1.78rem;}
    #page2 {width:100%; height:100%; position:absolute; top: 0; left:0; background:url(http://p2.ifengimg.com/a/2017/0615/background2.png) no-repeat; background-size:100% 100%; }
    #page2 .question {width:6.78rem; height:5.40rem;position: absolute; top:.58rem; left:50%; margin-left:-3.39rem;font-size:.5rem; color:#fff; padding: 2.3rem 1.2rem 0 .7rem; line-height:.74rem;background:url(http://p2.ifengimg.com/a/2017/0615/question.png) no-repeat; background-size:100% 100%;}
    #page2 .choose {  color:#000;padding: .24rem 0 0 1.5rem;font-size:.32rem; line-height:.33rem; padding-top:.27rem;}
    #page2 .chooseA {width:5.91rem; height:1.05rem;position: absolute; bottom:4rem;left:50%; margin-left:-2.955rem;background:url(http://p2.ifengimg.com/a/2017/0615/a.png) no-repeat; background-size:100% 100%;}
    #page2 .chooseB {width:6.05rem; height:1.07rem;position: absolute; bottom:2.8rem;left:50%; margin-left:-3.025rem;background:url(http://p2.ifengimg.com/a/2017/0615/b.png) no-repeat; background-size:100% 100%;}
    #page2 .chooseC {width:5.97rem; height:.96rem;position: absolute; bottom:1.6rem;left:50%; margin-left:-2.985rem;background:url(http://p2.ifengimg.com/a/2017/0615/c.png) no-repeat; background-size:100% 100%;}
    #page2 .choose .select {width:2.2rem; height:1.27rem; position: absolute; right:-0.7rem; top:-0.1rem; background:url(http://p2.ifengimg.com/a/2017/0615/select.png) no-repeat; background-size:100% 100%;}
    #page2 .next {width:3.69rem; height:1.15rem;position: absolute; bottom:1.2rem;left:50%;margin-left:-1.845rem;background:url(http://p2.ifengimg.com/a/2017/0615/next.png) no-repeat; background-size:100% 100%;}
    #page3 {width:100%; height:100%; position:absolute; top: 0; left:0; background:url(http://p2.ifengimg.com/a/2017/0615/background3.png) no-repeat; background-size:100% 100%; }
    #page3 .type {width:6.22rem; height:3.50rem; position: absolute; top:.1rem; left:.2rem;}
    #page3 .type.happy {width:6.32rem; height:3.09rem; top:.4rem;left:.3rem;}
    #page3 .type.strit {width:6.94rem; height:3.03rem; top:.3rem;left:.3rem;}
    #page3 .detail {width:7.27rem; box-sizing: border-box; padding:1rem .7rem 0;color:#000; height:5rem; position: absolute;  top:2.93rem;left:50%; margin-left:-3.635rem; font-size: .34rem; line-height:.55rem; padding-top: .8rem;background:url(http://p2.ifengimg.com/a/2017/0615/detail.png) no-repeat; background-size:100% 100%; }
    #page3 .retest, #page3 .totest{width:2.69rem; height:1.61rem; position: absolute;  bottom:2rem; left:.5rem;  background:url(http://p2.ifengimg.com/a/2017/0615/retest.png) no-repeat; background-size:100% 100%; }
    #page3 .totest {width:3.56rem; height:1.67rem; left:50%; margin-left:-1.78rem;background:url(http://p3.ifengimg.com/ifengimcp/pic/20170616/9bef9838030bfb09eaad_size26_w356_h167.png) no-repeat; background-size:100% 100%;}
    #page3 .share {width:3.42rem; height:1.61rem; position: absolute;  bottom:2rem; right:.5rem;  background:url(http://p2.ifengimg.com/a/2017/0615/share.png) no-repeat; background-size:100% 100%; }
    #page3 .download {width:4.58rem; height:1.02rem; position: absolute;  bottom:.7rem; left:50%; margin-left:-2.29rem; background:url(http://p2.ifengimg.com/a/2017/0615/download.png) no-repeat; background-size:100% 100%; }
    .coverShare {position: absolute;top: 0;left: 0;width: 100%;height: 100%;background: url(http://p2.ifengimg.com/a/2017/0615/sharebg.png) no-repeat;opacity: 0.85;background-size: cover;z-index: 9999;}
    /*动画*/
    .bounceInDown {-webkit-animation: bounceInDown 1s both; animation: bounceInDown 1s both;}
    .bounceInLeft {-webkit-animation: bounceInLeft 1s both; animation: bounceInLeft 1s both;}
    .bounceInRight {-webkit-animation: bounceInRight 1s  both; animation: bounceInRight 1s  both;}
    .fadeInUp {-webkit-animation: fadeInUp 1s  both; animation: fadeInUp 1s  both;}
    .fadeInUp1 {-webkit-animation: fadeInUp 1s  both; animation: fadeInUp 1s  both;}
    .pulse {-webkit-animation: pulse 1s infinite both; animation: pulse 1s infinite both;}
    .fadeOutDown {-webkit-animation: fadeOutDown 1s  both; animation: fadeOutDown 1s both;}
    #page1 .title.bounceInDown { -webkit-animation-delay: .25s; animation-delay: .25s;}
    #page1 .father1.bounceInLeft { -webkit-animation-delay: .5s; animation-delay: .5s;}
    #page1 .father2.bounceInRight {-webkit-animation-delay: .75s; animation-delay: .75s;}
    #page2 .choose.chooseB {-webkit-animation-delay: .25s; animation-delay: .25s;}
    #page2 .choose.chooseC {-webkit-animation-delay: .5s; animation-delay: .5s;}
    @media screen and (max-width: 374px){
        #page1 .title_container { height:auto; width:6rem; margin-left: -3rem;}
        #page1 .title {height:auto; width:5.63rem; margin-left: -2.815rem;}
        #page2 .choose {font-size:.32rem; line-height:.33rem; padding-top:.27rem;}
        #page2 .question {font-size:.5rem;}
        #page3 .detail {font-size: .34rem; line-height:.55rem; padding-top: .8rem;}
    }
</style>
<!--REM适配-->
<script>
    (function (doc, win) {
        var _root = doc.documentElement,
            resizeEvent = 'orientationchange' in window ? 'orientationchange' : 'resize',
            resizeCallback = function () {
                var clientWidth = _root.clientWidth,
                    fontSize = 10*10;
                if (!clientWidth) return;
                if(clientWidth < 500) {
                    fontSize = 100*(clientWidth / 750);
                } else {
                    fontSize = 100*(500 / 750);
                }
                _root.style.fontSize = fontSize + 'px';
            };
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvent, resizeCallback, false);
        doc.addEventListener('DOMContentLoaded', resizeCallback, false);
    })(document, window);
</script>
<body>
<div id="app" v-cloak>
    <div class="loading" v-if="loading">
        <div class="img-container">
            <img src="http://p2.ifengimg.com/29b92e35b2b20708/2017/6/ifeng.png"/>
        </div>
        <p>正在加载<span v-text="loadNum"></span>...</p>
    </div>
    <div id="page1" v-show="show.page1">
        <div class="title_container">
            <img src="http://p2.ifengimg.com/a/2017/0615/bg.png"/>
        </div>
        <div class="title">
            <img src="http://p2.ifengimg.com/a/2017/0615/title.png"/>
        </div>
        <div class="father1" @click="showTest">
            <img src="http://p2.ifengimg.com/a/2017/0615/fa1.png"/>
        </div>
        <div class="father2" @click="showTest">
            <img src="http://p2.ifengimg.com/a/2017/0615/fa2.png"/>
        </div>
        <div class="logo">
            <img src="http://p2.ifengimg.com/a/2017/0615/logo.png"/>
        </div>
    </div>
    <div id="page2" v-if="show.page2">
        <div class="question" v-text="testDetail.question"></div>
        <div class="choose chooseA" data-id='0' v-text="testDetail.answer[0].option"></div>
        <div class="choose chooseB" data-id='1' v-text="testDetail.answer[1].option"></div>
        <div class="choose chooseC" data-id='2' v-text="testDetail.answer[2].option"></div>
    </div>
    <div id="page3" v-if="show.page3">
        <div class="type aojiao" v-show="type == 'aojiao'">
            <img src="http://p2.ifengimg.com/a/2017/0615/aojiao.png"/>
        </div>
        <div class="type happy" v-show="type == 'happy'">
            <img src="http://p2.ifengimg.com/a/2017/0615/happy.png"/>
        </div>
        <div class="type strit" v-show="type == 'strit'">
            <img src="http://p2.ifengimg.com/a/2017/0615/strit.png"/>
        </div>
        <div class="detail" v-text="resultDetail.detail"></div>
        <div class="retest" @click="retest" v-if="inner"></div>
        <div class="totest" @click="totest" v-if="!inner"></div>
        <div class="share" @click="share " v-if="inner"></div>
        <div class="download" @click="download"></div>
    </div>
    <div class="coverShare" id="coverShare" @click="show.page4 = !show.page4 " v-show="show.page4"></div>
</div>
</body>
</html>
<script src="https://p1.ifengimg.com/a80c2beeeff78280/2017/24/zepto.min.js"></script>
<script src="http://p2.ifengimg.com/29b92e35b2b20708/2017/6/vue.min.js"></script>
<script src="http://p3.ifengimg.com/ifengimcp/sta/20170616/data.js_114050.js"></script>
<script type="text/javascript">
    var gloableSettings = {
        "domain": "inews.ifeng.com",
        "channelPath": "/",
        "pt":"",
    }
    var globalSettings = gloableSettings;
</script>
<!--微信分享 -->
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js?v1"></script>

<script>
    function getScript(src, callback) {
        var head = document.getElementsByTagName("head")[0];
        var js = document.createElement("script");
        js.setAttribute("src", src);
        js.onload = js.onreadystatechange = function() {
            if (!this.readyState || this.readyState == "loaded" || this.readyState == "complete") {
                head.removeChild(js);
                if (callback) callback();
            }
        }
        head.appendChild(js);
    }
    function mfp_getCookie(c_name) {
        var start = document.cookie.indexOf( c_name + "=");
        if ( start == -1 ) { return ""; }
        start = start + c_name.length+1;
        var end = document.cookie.indexOf(";",start);
        if (end == -1) { end = document.cookie.length; }
        return decodeURIComponent( document.cookie.substring(start,end) );
    };

    //获取uid
    function getUid(){
        var userid=mfp_getCookie("userid");
        var sid=mfp_getCookie("sid");
        if(sid == ""){
            sid = userid;
        }
        return sid;
    }
    function getUserid(){
        return mfp_getCookie("userid");
    }
    function getSid(){
        return mfp_getCookie("sid");
    }
</script>

<script>
    console.log(testData,resultData);
    Vue.config.devtools = true
    var app = new Vue({
        el: "#app",
        data: {
            test: testData,
            result: resultData,
            loading: true,
            loadNum: '',
            inner: true,
            show: {
                page1: false,
                page2: false,
                page3: false,
                page4: false
            },
            testNum: 0,
            score: 0,
            type:''
        },
        mounted: function() {
            var params = this.getQuery(location.search);
            if(params.score && params.type) {
                this.loading = false;
                this.show.page3 = true;
                this.inner = false;
                this.score = parseInt(params.score);
                this.type = params.type;
                this.$nextTick(function() {
                    $('.share').addClass('pulse');
                })
            } else {
                this.loadImg();
            }
        },
        computed: {
            testDetail: function() {
                return this.test[this.testNum]
            },
            resultDetail: function() {
                if(this.score >= 6 && this.score <=11) {
                    this.type = 'strit';
                    return this.result[0];
                } else if (this.score >= 12 && this.score <= 15) {
                    this.type = 'happy';
                    return this.result[1];
                } else if (this.score >= 16) {
                    this.type = 'aojiao';
                    return this.result[2];
                }
            }
        },
        methods: {
            loadImg: function() {
                var ary = ['a','aojiao','b','background','background2','background3','bg','c','detail','download','fa1','fa2','happy',
                    'logo','next','question','retest','select','share','strit','title'];
                ary.forEach(function(item) {
                    var oImg = new Image();
                    oImg.src = "http://p2.ifengimg.com/a/2017/0615/"+ item + '.png';
                    oImg.onload = load;
                })
                var num = 0;
                var self = this;
                function load() {
                    num ++
                    self.loadNum = parseInt(num / ary.length * 100) + "%"
                    if (num == ary.length) {
                        self.loading = false;
                        self.show.page1 = true;
                        self.animate1();
                    }
                }
            },
            totest: function() {
                this.show.page1 = false;
                this.show.page2 = false;
                this.show.page3 = false;
                this.show.page4 = false;
                this.loading = true;
                this.inner = true;
                this.statistics('father_retest');
                this.loadImg();
            },
            download: function() {
                this.statistics('father_download');
                this.upApp();
            },
            share: function() {
                this.show.page4 = !this.show.page4;
                this.statistics('father_share');
            },
            retest: function() {
                this.testNum = 0;
                this.score = 0;
                this.type = '';
                this.show.page2 = true;
                this.show.page3 = false;
                this.statistics('father_retest');
                var self = this;
                this.$nextTick(function() {
                    self.animate2();
                })
            },
            showTest: function() {
                this.show.page1 = false;
                this.show.page2 = true;
                var self = this;
                this.$nextTick(function() {
                    self.animate2();//开启第二页的动画
                })
            },
            nextTest: function(element) {
                var self = this;
                //删除其他的选择钩钩
                $('.select').remove();
                //先进行计算
                this.getScore(element.dataset.id);//element.dataset.id 说的是选择的是第几个元素

                if(this.testNum == (this.test.length - 1)) {
                    // 如果是最后一个,展示一下结果页
                    console.log('last')
                    setTimeout(function() {
                        self.show.page3 = true;
                        self.show.page2 = false;
                        self.getWeiXin();
                        self.$nextTick(function() {
                            $('.share').addClass('pulse');
                        })
                        return
                    },500)
                }

                //在选项的后面添加钩钩
                $(element).append('<span class="select"></span>');
                setTimeout(function() {
                    //过500毫秒才进行下一个测试题，这样可以显示钩钩
                    self.testNum ++;
                    self.$nextTick(function() {
                        self.animate2();
                    })
                },500)
            },
            getScore: function(id) {
                var itemScore = this.testDetail.answer[id].score;
                this.score = this.score + itemScore;
            },
            animate1: function() {
                //第一页的动画
                $('.title_container').addClass('bounceInDown');
                $('.title').addClass('bounceInDown');
                $('.father1').addClass('bounceInLeft');
                $('.father2').addClass('bounceInRight');
                setTimeout(function() {
                    $('.father1').addClass('pulse');
                    $('.father2').addClass('pulse');
                },1750)
            },
            animate2: function() {
                //第二页的动画
                var self = this;
                var fn = function(touch) {
                    //下一个题目
                    $('.choose').off('touchstart')
                    self.nextTest(touch.srcElement)
                }
                //钩钩删掉
                $('.select').remove();
                //动画开始还没结束不让点
                $('.choose').off('touchstart')
                $('.choose').removeClass('fadeInUp');
                $('.choose').addClass('fadeInUp');
                setTimeout(function() {
                    $('.choose').removeClass('fadeInUp');
                    //动画结束以后才让点
                    $('.choose').on('touchstart',fn)
                }, 1000)
            },
            getWeiXin: function() {
                var self = this;
                this.$nextTick(function() {
                    sharelink= 'http://inews.ifeng.com/fatherday.shtml?type='+ self.type +'&score=' + self.score;
                    getScript('http://api.3g.ifeng.com/weishare_token_api?url=' + encodeURIComponent(window.location.href) + "&callback=wxshareCallback&_t=" + new Date().getTime());
                })
            },
            getQuery: function(query) {
                var reg = /([^?=&\s]+)[=\s]*([^?=&\s]*)/g;
                var obj = {};
                while(reg.exec(query)){
                    obj[RegExp.$1] = RegExp.$2;
                }
                return obj
            },
            statistics: function(value) {
                var tanzhen = "http://stadig.ifeng.com/actsta.js?datatype=wap_act&value="+ value +"&uri="+encodeURIComponent(window.location.href)+"&ref="+encodeURIComponent(window.location.href)+"&uid="+encodeURIComponent(getUserid())+"&sid="+encodeURIComponent(getSid())+"&time="+encodeURIComponent(new Date().valueOf())+"&ci="+encodeURIComponent(gloableSettings.channelPath)+"&pt="+encodeURIComponent(gloableSettings.pt);
                console.log('tanzhen',tanzhen);
                getScript( tanzhen );
            },
            upApp: function() {
                var open_url = window.location;
                var loadOpen = {
                    download_new: 'http://a.app.qq.com/o/simple.jsp?pkgname=com.ifeng.news2&ckey=CK1354553159819 ', //应用宝地址
                    stopover: 'https://api.iclient.ifeng.com/appdownload', //下载中转页
                    uc_stopover: 'http://p2.ifengimg.com/a/2017/0425/uc_down.html?', //uc 下载中转页
                    kind:'twb',
                    type:'list',
                    callPro: function() { // 协议
                        return 'comifengnewsclient://call?type=' + this.type + '&kind=' + this.kind
                    },
                    callProIos: function() { // ios 协议
                        return 'https://api.iclient.ifeng.com/' + 'wakeupiOS/ifengnews' +
                            '/call?fromtype=sfweb&type=' + this.type + '&kind=' + this.kind
                    },

                    ua: navigator.userAgent,
                    weixin: navigator.userAgent.match(/MicroMessenger/ig),
                    QQ: navigator.userAgent.match(/QQ\//),
                    PC: !/iphone|ipod|ipad|android/ig.test(navigator.userAgent),
                    isWeibo: navigator.userAgent.match(/WeiBo/i),
                    isAndroid: navigator.userAgent.match(/android/ig),
                    isIos: navigator.userAgent.match(/iphone|ipod/ig),
                    isIpad: navigator.userAgent.match(/ipad/ig),
                    wxosEdition: function() { // 判断IOS版本
                        var reg = /([1-9]?[0-9])_([0-9])/ig;
                        var iosarr = reg.exec(this.ua);
                        if (iosarr != null && iosarr.length >= 3) {
                            var wxosEdition = iosarr[1];
                        } else {
                            var wxosEdition = 0;
                        }
                        return wxosEdition;
                    },
                    publicClientAuto: function(host) {
                        if (this.ua.indexOf("UCBrowser") > 0) {
                            location.href = this.uc_stopover + host; //下载地址
                        } else if (this.ua.indexOf("Chrome") > -1 && this.ua.indexOf(
                                "MQQBrowser") < 0) { //chrome
                            location.href = host;
                        } else if (this.isIos || this.isIpad) { //ios
                            location.href = host;
                        } else if (this.ua.indexOf("MQQBrowser") > 0) { //qq
                            location.href = host;
                        } else {
                            其他
                            var ifr = document.createElement("iframe");
                            ifr.src = host;
                            ifr.style.display = "none";
                            document.body.appendChild(ifr);
                        }
                    },
                    init: function() {
                        if (window.location.search.indexOf("?ch=qd_hw_fyp1") != -1) {
                            openByApp('com.ifeng.news2', window.location.href)
                        } else {
                            var wxosEdition = this.wxosEdition(); //ios系统
                            if (this.isIos) { // ios
                                if (wxosEdition >= 9) { // ios>=9
                                    location.href = this.callProIos();
                                } else { // ios<9
                                    if (this.weixin || this.QQ || this.isWeibo) { // ios<9 wx qq weibo
                                        location.href = this.download_new + '&android_scheme=' +
                                            encodeURIComponent(this.download_new);
                                    } else { // ios<9 browsers
                                        this.publicClientAuto(this.callPro());
                                        if (this.ua.indexOf("UCBrowser") < 0) { //除uc以外
                                            var that = this;
                                            setTimeout(function() {
                                                if (document.hasFocus()) {
                                                    location.href = that.stopover; //下载地址
                                                }
                                            }, 1000);
                                        }
                                    }
                                }
                            } else { // android
                                if (this.weixin || this.QQ || this.isWeibo) { // android wx qq weibo,跳应用宝
                                    location.href = this.download_new + '&android_scheme=' +
                                        encodeURIComponent(this.callPro());
                                } else { // browsers other
                                    this.publicClientAuto(this.callPro());
                                    if (this.ua.indexOf("UCBrowser") < 0) { //除uc以外
                                        var that = this;
                                        setTimeout(function() {
                                            if (document.hasFocus()) {
                                                location.href = that.stopover; //下载地址
                                            }
                                        }, 1000);
                                    }
                                }
                            }
                        }
                    }
                }
                loadOpen.init();
            }
        }
    })
</script>
<script>
    sharetitle= "天呢，我爸竟然是这样的男人";
    sharelink= "http://inews.ifeng.com/fatherday.shtml";
    shareimgUrl= "http://p2.ifengimg.com/a/2017/0615/weixinImg.jpg";
    sharedesc= "惊不惊喜？意不意外？";
    //sharedesc= sharedesc || '来自凤凰新闻客户端';
    shareTimeline = "天呢，我爸竟然是这样的男人";

    function wxshareCallback(__wxShareConfig){
        wx.config({
            debug: false,
            appId: __wxShareConfig.appId,
            timestamp: __wxShareConfig.timestamp,
            nonceStr: __wxShareConfig.nonceStr,
            signature: __wxShareConfig.signature,
            jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo'
                // 所有要调用的 API 都要加到这个列表中
            ]
        });


        wx.ready(function () {
            wx.checkJsApi({
                jsApiList: ['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
                success: function(res) {
                    // 以键值对的形式返回，可用的api值true，不可用为false
                    console.log(res);
                }
            });
            wx.error(function(res){
                console.log(res);
            })
            //获取“分享到朋友圈”按钮点击状态及自定义分享内容接口
            wx.onMenuShareTimeline({
                title: shareTimeline, // 分享标题
                link: sharelink, // 分享链接
                imgUrl: shareimgUrl, // 分享图标
                success: function () {
                    // 用户确认分享后执行的回调函数

                },
                cancel: function () {
                    // 用户取消分享后执行的回调函数
                }
            });
            //获取“分享给朋友”按钮点击状态及自定义分享内容接口
            wx.onMenuShareAppMessage({
                title: sharetitle, // 分享标题
                desc: sharedesc, // 分享描述
                link: sharelink, // 分享链接
                imgUrl: shareimgUrl, // 分享图标
                type: 'link', // 分享类型,music、video或link，不填默认为link
                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                success: function () {
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                    // 用户取消分享后执行的回调函数
                }
            });
            //获取“分享到QQ”按钮点击状态及自定义分享内容接口
            wx.onMenuShareQQ({
                title: sharetitle, // 分享标题
                desc: sharedesc, // 分享描述
                link: sharelink, // 分享链接
                imgUrl: shareimgUrl, // 分享图标
                success: function () {
                    // 用户确认分享后执行的回调函数
                    //alert(shareimgUrl);
                },
                cancel: function () {
                    // 用户取消分享后执行的回调函数
                }
            });
            //获取“分享到腾讯微博”按钮点击状态及自定义分享内容接口
            wx.onMenuShareWeibo({
                title: sharetitle, // 分享标题
                desc: sharedesc, // 分享描述
                link: sharelink, // 分享链接
                imgUrl: shareimgUrl, // 分享图标
                success: function () {
                    // 用户确认分享后执行的回调函数
                },
                cancel: function () {
                    // 用户取消分享后执行的回调函数
                }
            });
        })
        //获取“分享到朋友圈”按钮点击状态及自定义分享内容接口
        wx.onMenuShareTimeline({
            title: sharetitle +'  -凤凰新闻', // 分享标题
            link: sharelink, // 分享链接
            imgUrl: shareimgUrl, // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数

            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
    }
    getScript('http://api.3g.ifeng.com/weishare_token_api?url=' + encodeURIComponent(window.location.href) + "&callback=wxshareCallback&_t=" + new Date().getTime());

</script>
<!-- 统计探针 -->
<script src="http://p1.ifengimg.com/a/2016/0809/sta_collection_common_iifeng_v4.js"></script>
<script src="http://p3.ifengimg.com/a/2017/0329/sta_collection_iifeng_pv_v8.js"></script>         <!-- 统计探针end -->

